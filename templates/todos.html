{% extends "layout.html" %}
{% set active = 'todos' -%}
{% block title %}æ¨è åˆ—è¡¨{% endblock %}
{% block content %}
  <div class="page-header">
    <h1>Fresh You</h1>
  </div>
  {#<form action="/todos" method="post">
    <div class="input-group">
      <input id="todo-content" class="form-control input-lg" type="text" name="content" placeholder="è¾“å…¥å…³é”®å­—è®©æˆ‘ä»¬æ›´äº†è§£ä½ ..." />
      <span class="input-group-btn">
        <button class="btn btn-success btn-lg" type="button" onclick=submit()><span class="glyphicon glyphicon-chevron-right"></span></button>
      </span>
    </div>
  </form>#}
    <form action="{{ url_for('todos.search', METHOD='post') }}">
    <div class="input-group">
      <input id="todo-content" class="form-control input-lg" type="text" name="content" placeholder="è¾“å…¥å…³é”®å­—è®©æˆ‘ä»¬æ›´äº†è§£ä½ ..." />
      <span class="input-group-btn">
        <button class="btn btn-success btn-lg" type="button" onclick=submit()><span class="glyphicon glyphicon-chevron-right"></span></button>
      </span>
    </div>
  </form>
  {% if not g.user %}
    <div class="alert alert-info alert-box">
    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span>&times;</span></button>
    <p>æœªç™»å½•çŠ¶æ€ä¸‹å¯ä»¥é€šè¿‡è¾“å…¥å…³é”®å­—å‘æ‚¨æ¨èæ‚¨å¯èƒ½æ‰€éœ€è¦çš„<a class="alert-link" href="{{ url_for('users.login') }}">ç™»å½•</a> åæˆ‘ä»¬å¯ä»¥æ›´äº†è§£æ‚¨,æä¾›æ›´å‡†ç¡®çš„æ¨è</p>
  </div>
{% endif %}
{% with messages = get_flashed_messages() %}
{% if messages %}
  {% for message in messages %}
    <div class="alert alert-warning alert-box">
    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span>&times;</span></button>
    {{ message }}
  </div>
{% endfor %}
{% endif %}
{% endwith %}
<div class="btn-group todo-category-switch">
<a class="btn btn-default{% if status == 0 %} active{% endif %}" href="{{ url_for('todos.show') }}">å…¨éƒ¨æ¨è</a>
<a class="btn btn-default{% if status == 1 %} active{% endif %}" href="{{ url_for('todos.show', status=1) }}">å·²æ¥å—æ¨è</a>
</div>
{% if not todos %}
{% if status == 0 %}
<div class="list-empty">
  <p class="text-center large-emoji">ğŸ‰</p>
  <p class="text-center lead">All Done!</p>
  <p class="text-center"><a class="text-muted" href="{{ url_for('todos.show', status=1) }}">æŸ¥çœ‹å·²æ¥å—æ¨è</a> æˆ–è€… <a class="text-muted" href="#" onclick=document.getElementById('todo-content').focus()>é€šè¿‡å…³é”®å­—è·å–ä¸€ä¸ªæ–°çš„æ¨è</span></a></a></p>
</div>
{% elif status == 1 %}
<div class="list-empty">
  <p class="text-center large-emoji">ğŸ¤”</p>
  <p class="text-center lead">Wow. Nothing's Done Here.</p>
  <p class="text-center"><a class="text-muted" href="{{ url_for('todos.show', status=0) }}">å»çœ‹çœ‹å…¨éƒ¨æ¨è</a></p>
</div>
{% endif %}
{% else %}
{% if status == 0 %}
<ul class="list-group">
  {% for todo in todos %}
    <li class="list-group-item">
      <form class="pull-right" action="{{ url_for('todos.delete', todo_id=todo.id, METHOD='DELETE', status=0) }}" method="post" id=delete-{{todo.id}}>
        <span class="glyphicon glyphicon-trash todo-delete" style="color: #5cb85c">ä¸å†æ¨è</span>
      </form>
      <form action="{{ url_for('todos.done', todo_id=todo.id, status=0) }}" method="post" id="done-{{todo.id}}">
        <span class="glyphicon glyphicon-unchecked"></span> {{ todo.get('content') }}
      </form>
    </li>
  {% endfor %}
</ul>
{% else %}
<ul class="list-group">
  {% for todo in todos %}
    <li class="list-group-item">
      <form class="pull-right" action="{{ url_for('todos.delete', todo_id=todo.id, METHOD='DELETE', status=1) }}" method="post" id=delete-{{todo.id}}>
        <span class="glyphicon glyphicon-trash todo-delete">ä¸å†æ¨è</span>
      </form>
      <form action="{{ url_for('todos.undone', todo_id=todo.id, status=1) }}" method="post" id="undone-{{todo.id}}">
        <span class="glyphicon glyphicon-check text-muted"></span> <del class="text-muted">{{ todo.get('content') }}</del>
      </form>
    </li>
  {% endfor %}
</ul>
{% endif %}
<p class="text-muted"><span class="glyphicon glyphicon-info-sign"></span> {% if todos|length == 1 %}åªå‰©ä¸‹æœ€å{% else %}å…±{% endif %} {{ todos|length }} ä¸ª æ¨èã€‚</p>
{% endif %}
{% endblock %}